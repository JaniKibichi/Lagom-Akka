# Creating Microservices with Lagom
Lagom is build on Akka and Play Frameworks making it an opinionated scala framework. It uses these mature frameworks as the basis for processing incoming API calls. Lagom already comes bundled with Kafka and Cassandra.
- Create a scaffolding Lagom App:
````
sbt new lagom/lagom-scala.g8
````
- While in the project run:
````
sbt runAll
````
- Test the API services:
````
curl -v -X http://127.0.0.1:9000/api/hello/graham

curl -v -H "Content-Type: application/json" -X POST -d '{"message":"Hello Lagom!"}' http://127.0.0.1:9000/api/hello/graham

curl -v -X GET http://127.0.0.1:9000/api/healthcheck
````
<br><br>
- Branch out to explore the service locator
````
git checkout -b service_locator master
````
- Add the line to build.sbt:
````
lagomUnmanagedServices in ThisBuild := Map("login" -> "http://127.0.0.1:8888")
````
- Run the App:
````
sbt runAll
````
<br><br>
- Branch out to explore the service descriptor
````
git checkout -b service_descriptor service_locator
````
- Update LagomscalaServiceImpl.scala and LagomscalaService.scala
- Run the services:
````
sbt runAll
````
- Test the new endpoints
````
curl -X POST -H "Content-Type: text/plain" --data "UPPERCASE" http://127.0.0.1:9000/toLowercase
curl -X POST -H "Content-Type: text/plain" --data "lowercase" http://127.0.0.1:9000/toUppercase
curl -X GET http://127.0.0.1:9000/isEmpty/notEmpty
curl -X GET http://127.0.0.1:9000/areEqual/something/another/somethingElse
````
<br><br>
- Branch out to explore implementing lagom services
````
git checkout -b implement_lagom_services service_descriptor
````
- Define new module in the build.sbt at the end of file:
````
lazy val `token-api` = (project in file("token-api"))
.settings(
  libraryDependencies ++= Seq(
   lagomScaladslApi
  )
)

lazy val `token-impl` = (project in file("token-impl"))
.enablePlugins(LagomScala)
.settings(
 libraryDependencies ++= Seq(
  lagomScaladslPersistenceCassandra,
  lagomScaladslTestKit,
  macwire,
  scalaTest
 )
)
.settings(lagomForkedTestSettings: _*)
.dependsOn(`token-api`)
````
- Update the project aggregate
````
lazy val `lagomscala` = (project in file("."))
  .aggregate(`lagomscala-api`, `lagomscala-impl`,
   `lagomscala-stream-api`, `lagomscala-stream-impl`,
   `token-api`,`token-impl`)

````
- Run sbt compile
````
sbt compile
````
- Create new package in token-api folder
````
mkdir -p src/main/scala/com/github/janikibichi/learnakka/token/api
````
- Create file:<b>com.github.janikibichi.learnakka.token.api.Messages.scala</b>
- Create file:<b>com.github.janikibichi.learnakka.token.api.TokenService.scala</b>
- Create new package in token-impl folder
````
mkdir -p src/main/scala/com/github/janikibichi/learnakka/token/impl
````
- Create file:<b>com.github.janikibichi.learnakka.token.impl.TokenServiceImpl.scala</b>
- Create file: <b>com.github.janikibichi.learnakka.token.impl.TokenLoader.scala</b>
- Specify where the service loader is in the application.conf, in the token-impl directory:
````
mkdir -p src/main/resources
touch src/main/resources/application.conf
````


























##### This project has been generated by the lagom/lagom-scala.g8 template. For instructions on running and testing the project, see https://www.lagomframework.com/get-started-scala.html.
